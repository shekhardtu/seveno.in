(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[15406],{618674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},889464:(e,t,s)=>{var r=s(618674)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=r},607187:(e,t,s)=>{var r=s(889464),a=s(479833),n=/[&<>"']/g,o=RegExp(n.source);e.exports=function(e){return(e=a(e))&&o.test(e)?e.replace(n,r):e}},768559:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(826067);const a=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,n=/\/discover\/article\/[\w-]+\/(\d+)/,o=(e,t)=>t?e.substring(t.length).split("/")[0]:e,c=(e,t,s,c)=>{var i,u;if(!e)return"";let d="";const l=t.board&&t.board.url;switch(e){case"/":case"/homefeed/":return"UserHomefeedResource";case t.pinner&&`/${t.pinner.username}/pins/`:return"UserPinsResource";case t.pinner&&`/${t.pinner.username}/`:case/\/_activity\//.test(e)&&e:return"UserActivityPinsResource";case/\/_created\//.test(e)&&e:return t.story_pin_data_id?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(e)&&e:return"UserDiscoveredPinsResource";case/\/_shop\//.test(e)&&e:return"StoreFrontFeedResource";case/\/_saved\//.test(e)&&e:return"BoardlessPinsResource";case t.pinner&&`/${t.pinner.username}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(e)&&e:return"VisualLiveSearchResource";case/\/pin\//.test(e)&&e:d="/pin/";const p=o(e,d);if(t.id!==p)return t.call_to_create_source_pin_id?`ApiResource_callToCreatePins_${p}`:`RelatedPinFeedResource_${p}`;break;case/\/search\//.test(e)&&e:if(s){return`SearchResource_${((0,r.mB)(s,{shouldDecode:!1}).q||"").toLowerCase()}`}if(c)return`SearchResource_${encodeURIComponent(c.q||"").toLowerCase()}`;break;case n.test(e)&&e:return`ExploreArticleResource_${(null===(i=e.match(n))||void 0===i?void 0:i[2])||"unknown"}`;case/\/discover\/article\//.test(e)&&e:d="/discover/article/";return`ExploreArticleResource_${o(e,d)}`;case/\/categories\//.test(e)&&e:d="/categories/";return`CategoryFeedResource_${o(e,d)}`;case/\/discover\/topics\//.test(e)&&e:return"CategoryFeedResource";case/\/news_hub\//.test(e)&&e:d="/news_hub/";return`NewsHubDetailsResource_${o(e,d)}`;case/\/_tools\/more-ideas\//.test(e)&&e:return"BoardContentRecommendationResource";case/\/topics\//.test(e)&&e:d="/topics/";return`TopicFeedResource_${o(e,d)}`;case t.pinner&&`/${t.pinner.username}/products/`:return"StoreFrontFeedResource";case/\/source\//.test(e)&&e:d="/source/";return`DomainFeedResource_${o(e,d)}`;case/\/explore\//.test(e)&&e:d="/explore/";return`SearchResource_${o(e,d)}`;case l:case!!l&&/\/more_ideas\//.test(e)&&e:return"BoardFeedResource";case l&&e.indexOf(l)>-1&&e:return"BoardSectionPinsResource";case/\/following\//.test(e)&&e:return"FollowingFeedResource";case/\/brand_catalog\//.test(e)&&e:return"BrandCatalogFeedResource";case a.test(e)&&e:return`TodayArticleFeedResource_${(null===(u=e.match(a))||void 0===u?void 0:u[2])||"unknown"}`;case/\/today\//.test(e):return"TodayTabResource";case/\story_feed\//.test(e)&&e:if(s){const{feed_type:e,request_params:t}=(0,r.mB)(s);return`StoryFeedResource_${e}_${t}`}break;case/\/your-shop\//.test(e)&&e:return"PersonalBoutiqueResource"}return""},i=(e,t,s)=>{if(!e||!e.tracking_params||!t)return;if(!e.tracking_params_map)return`${e.tracking_params}~0`;const{pathname:r,search:a,query:n}=t,o=c(r,e,a,n),i=e.tracking_params_map||{},u=Object.keys(i);let d;if((r||"").startsWith("/pin/")){const e=u.find((e=>"PinResource"!==e));d=e?i[e]:i.PinResource}else d=i[o];let l;if(!d&&s&&s.length){const t=(e=>{let t=null==e?void 0:e.pathname;return t?(t.match(/\/search\//)&&null!=e&&e.search&&(t+=e.search),t.toLowerCase()):""})(s[s.length-1].location);l=c(t,e,a,n),d=i[l]}return d||(d=`${e.tracking_params||""}~0`),d}},124237:(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(607187),a=s.n(r);const n={};n._showErrorCallback=n._showErrorCallback||null,n.setShowHtmlErrorCallback=function(e){n._showErrorCallback=e},n.showError=function(e,t,s){const r=a()(e);return n.showHtmlError(r,t,s)},n.showHtmlError=function(e,t,s){"function"==typeof n._showErrorCallback&&n._showErrorCallback(e,t,s)};const o=n},784641:(e,t,s)=>{s.d(t,{E5:()=>u,T7:()=>r,Y_:()=>d,Yj:()=>o,d9:()=>p,nx:()=>l,pe:()=>c,xt:()=>i});s(883119);function r(e,t,s,r){const a=function(e,t){return t?"shop":0===e||2===e?"trending":1===e?"best":"article"}(e,t),n=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\â€™'"]/g,"").trim().replace(/\s+/g,"-")}(s);return`/today/${a}/${encodeURIComponent(n)}/${r}/`}const a={"www.pinterest.com":"US","www.pinterest.co.uk":"GB","www.pinterest.ca":"CA","www.pinterest.com.au":"AU","br.pinterest.com":"BR","www.pinterest.com.mx":"MX","ar.pinterest.com":"AR","www.pinterest.cl":"CL","co.pinterest.com":"CO","www.pinterest.de":"DE","www.pinterest.at":"AT","www.pinterest.ch":"CH","www.pinterest.fr":"FR","in.pinterest.com":"IN","id.pinterest.com":"ID","www.pinterest.jp":"JP"},n={US:"en",GB:"en",CA:"en",AU:"en",BR:"pt",MX:"es",AR:"es",CL:"es",CO:"es",PE:"es",DE:"de",AT:"de",CH:"de",FR:"fr",IN:"en",ID:"id",JP:"ja",IT:"it"},o=(e,t)=>{const s=n[e];return!(null===s||s!==t&&!t.startsWith(s))},c=e=>a[e],i=(e,t,s)=>e||(t||s||""),u=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner)),d=e=>"todayarticle"===e.type,l=e=>Array.isArray(e)&&e.length>0&&e.every((e=>"story"===e.type)),p=e=>{var t,s;return(null!==(t=e.height)&&void 0!==t?t:1)/(null!==(s=e.width)&&void 0!==s?s:1)}},215292:(e,t,s)=>{s.d(t,{Z:()=>o,q:()=>n});var r=s(667294);const a=()=>{const[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!1),[n,o]=(0,r.useState)(!1);return{active:e,focused:s,hovered:n,onBlur:()=>{a(!1),t(!1)},onFocus:()=>a(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>o(!0),onMouseLeave:()=>{o(!1),t(!1)},onMouseUp:()=>t(!1)}};function n({children:e}){return e(a())}const o=a},479301:(e,t,s)=>{s.d(t,{i5:()=>R,sX:()=>S,Z5:()=>m,NG:()=>v,MT:()=>h});var r=s(667294),a=s(6637),n=s(802201),o=s(682492),c=s.n(o);const i=(e,t)=>e.data[t]&&e.data[t].messages||[];function u(e,t){const s={};return e.filter((e=>!!e)).reduce(((e,r)=>{const a=t(r);return s[a]?(c()(s[a],r),e):(s[a]=r,e.concat([r]))}),[])}function d(e){return[...e].sort(((e,t)=>new Date(e.created_ms||e.created_at)-new Date(t.created_ms||t.created_at)))}function l(e,t,s){let r=i(e,t).concat(s);return r=u(r,(e=>e.id)),d(r)}const p={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,objectAttachment:null,showConversationsDropdown:!1,showNewMessageView:!1,ui:{},unread:0};function _(e=p,t){if("CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!1,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){const{id:s}=t.payload;return{...e,data:{...e.data,[s]:{...e.data[s]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){const s={...e,data:{...e.data}},{id:r}=t.payload;return delete s.data[r],s}if("FETCH_COMPLETE"===t.type){const{options:s,resource:r,response:a}=t.payload,n=a.resource_response.data;if("ConversationMessagesResource"===r){const t=n||[],r=(null==s?void 0:s.conversation_id)||"",a=l(e,r,t),o=a[a.length-1];return{...e,data:{...e.data,[r]:{...e.data[r],id:r,messages:a,unread:0,last_message:o}}}}if("ConversationsResource"===r){const t=n||[],s={...e,data:{...e.data}};return t.forEach((e=>{const{id:t,created_at:r,name:a,board:n,emails:o,unread:c,users:i,last_message:u}=e,d=l(s,t,[u]);s.data[t]={...s.data[t],id:t,created_at:r,name:a,board:n,emails:o||[],unread:c||0,users:i||[],last_message:u,messages:d}})),s}if("ConversationResource"===r){const t=n||{},{id:s}=t,r={...e,data:{...e.data}};return s&&(r.data[s]={...r.data[s],...t}),r}if("NewsHubBadgeResource"===r){if(n){const t=n.conversations_unseen_count||0;return{...e,unread:t}}return e}}else{if("MESSAGE_SEND_PENDING"===t.type){const{id:s,message:r}=t.payload;return e.data[s]?{...e,data:{...e.data,[s]:{...e.data[s],id:s,messages:[...e.data[s].messages,r]}}}:e}if("MESSAGE_SEND_PENDING_SUCCESS"===t.type){const{id:s,tempMessage:r,newMessage:a}=t.payload;if(e.data[s]){if(i(e,s).find((e=>e.id===r.id&&e.created_ms===r.created_ms))){let t=i(e,s).filter((e=>e.id!==r.id)).concat([a]);return t=u(t,(e=>e.id)),t=d(t),{...e,data:{...e.data,[s]:{...e.data[s],last_message:a,messages:t}}}}}return e}if("MESSAGE_SEND_PENDING_FAILURE"===t.type){const{id:s,tempMessageId:r}=t.payload;if(e.data[s]){const t=i(e,s).filter((e=>e.id!==r));return{...e,data:{...e.data,[s]:{...e.data[s],messages:t}}}}return e}if("OPEN_NEW_MESSAGE"===t.type){const{objectAttachment:s}=t.payload||null;return{...e,showNewMessageView:!0,open:null,objectAttachment:s}}if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1,objectAttachment:null,showNewMessageView:!1};if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};if("UPDATE_NEWSHUB_COUNT"===t.type)return{...e,newsHubCount:t.payload};if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload}}return e}var E=s(425288),w=s(505920),C=s(785893);const y=(()=>{let e=0;return()=>e++})(),{Provider:g,useHook:m}=(0,E.Z)("Conversations");function R({children:e}){const[t,s]=(0,r.useReducer)(_,p),n=(0,r.useCallback)((e=>s({type:"FETCH_COMPLETE",payload:e})),[]);(0,w.Z8)("ConversationMessagesResource",n),(0,w.my)("ConversationMessagesResource",n),(0,w.Z8)("ConversationsResource",n),(0,w.Z8)("ConversationResource",n),(0,w.Z8)("NewsHubBadgeResource",n);const o=(0,r.useCallback)(((e,t=!1,r="")=>s({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:r}})),[]),c=(0,r.useCallback)(((e,t="",r=!1)=>s({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:r}})),[]),i=(0,r.useCallback)((e=>s({type:"CONVERSATION_CREATE",payload:e})),[]),u=(0,r.useCallback)((e=>s({type:"CONVERSATION_DELETE",payload:{id:e}})),[]),d=(0,r.useCallback)(((e,t,r)=>{a.Z.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then((e=>{const t=e&&e.resource_response.data;s({type:"CONVERSATION_OPEN",payload:{id:t.id}})})).catch((e=>{const t=e.message_detail||e.message||"";r(t)}))}),[]),l=(0,r.useCallback)((()=>{s({type:"CLOSE_DROPDOWN"})}),[]),E=(0,r.useCallback)((()=>{s({type:"OPEN_DROPDOWN"})}),[]),y=(0,r.useCallback)((e=>{s({type:"OPEN_NEW_MESSAGE",payload:{objectAttachment:e}})}),[]),m=(0,r.useCallback)(((e,t)=>s({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}})),[]),R=(0,r.useCallback)(((e,t,r)=>s({type:"MESSAGE_SEND_PENDING_SUCCESS",payload:{id:e,tempMessage:t,newMessage:r}})),[]),v=(0,r.useCallback)(((e,t)=>s({type:"MESSAGE_SEND_PENDING_FAILURE",payload:{id:e,tempMessageId:t}})),[]),S=(0,r.useCallback)((e=>s({type:"UPDATE_NEWSHUB_COUNT",payload:e})),[]),h=(0,r.useCallback)((e=>s({type:"UPDATE_UNREAD_COUNT",payload:e})),[]),f=(0,r.useMemo)((()=>({conversationOpen:o,conversationClose:c,conversationCreate:i,conversationDelete:u,conversationGet:d,dropdownClose:l,dropdownOpen:E,newMessageOpen:y,pendingMessageSend:m,pendingMessageSuccess:R,pendingMessageFailure:v,updateNewsHubCount:S,updateUnreadCount:h,conversations:t})),[o,c,i,u,d,l,E,y,m,R,v,S,h,t]);return(0,C.jsx)(g,{value:f,children:e})}function v(){const{conversations:e,conversationCreate:t,pendingMessageSend:s,pendingMessageSuccess:r,pendingMessageFailure:o}=m(),c=(0,n.AF)();return async(n,i,u,d)=>{const{text:l,pinId:p,boardId:_,userId:E,didItId:w}=i;async function C(){const e=a.Z.create("ConversationMessagesResource",{conversation_id:n,text:l,pin:p,board:_,user:E,user_did_it_data:w,source:u}),t=`${y()}`,i={text:l,sender:d,created_at:(new Date).toString(),created_ms:Date.now(),id:t,pin:p?c[p]:null,type:"tempMessage"};s(n,i);try{var C;const t=null===(C=(await e.callCreate()).resource_response)||void 0===C?void 0:C.data;t&&r(n,i,t)}catch(g){throw o(n,t),new Error(g.message)}}if(e.data[n])await C();else{const e=a.Z.create("ConversationResource",{conversation_id:n});try{var g;const s=null===(g=(await e.callGet()).resource_response)||void 0===g?void 0:g.data;s&&(t(s),await C())}catch(m){throw new Error(m.message)}}}}function S(e){const{conversations:t}=m();return t.data[e]}function h(e){const{conversations:t}=m();return t.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}},480622:(e,t,s)=>{s.d(t,{C:()=>i,f:()=>c});var r=s(667294),a=s(425288),n=s(785893);const{Provider:o,useHook:c}=(0,a.Z)("MostRecentPin");function i({children:e}){const[t,s]=(0,r.useState)(),[a,c]=(0,r.useState)(),i=(0,r.useCallback)((e=>{const t=a?a.slice(0,10):[],s=[e].concat(t.filter((t=>t!==e)));c(s)}),[a]),u=(0,r.useMemo)((()=>({id:t,plpImageSignatures:a,setMostRecentPinId:s,setMostRecentPinImage:i})),[t,a,i]);return(0,n.jsx)(o,{value:u,children:e})}},711108:(e,t,s)=>{s.d(t,{l:()=>d,E:()=>u});var r=s(667294),a=s(425288);function n(e={},t){if("SUGGESTIONS_FETCH_COMPLETE"===t.type){const{payload:a}=t;if("ShareSuggestionsResource"===a.resource){var s;const r=t.payload.response.resource_response.data||[],{term:n=""}=null!==(s=a.options)&&void 0!==s?s:{};return{...e,[n]:r}}if("ShareSuggestionsTypeaheadResource"===a.resource){var r;const s=(t.payload.response.resource_response.data||{}).items||[],{term:n=""}=null!==(r=a.options)&&void 0!==r?r:{};return{...e,[n]:s}}}return e}var o=s(505920),c=s(785893);const{Provider:i,useHook:u}=(0,a.Z)("ShareSuggestions");function d({children:e}){const[t,s]=(0,r.useReducer)(n,{}),a=e=>{s({type:"SUGGESTIONS_FETCH_COMPLETE",payload:e})};(0,o.Z8)("ShareSuggestionsResource",a),(0,o.Z8)("ShareSuggestionsTypeaheadResource",a);const u=(0,r.useMemo)((()=>({shareSuggestions:t})),[t]);return(0,c.jsx)(i,{value:u,children:e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/15406-f00083a9a2f22e8b.mjs.map